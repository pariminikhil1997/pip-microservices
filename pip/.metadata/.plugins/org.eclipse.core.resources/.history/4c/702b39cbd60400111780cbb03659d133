package com.java.pip.service;

import com.java.pip.client.ProductClient;
import com.java.pip.client.dto.ProductDTO;
import com.java.pip.dto.UserResponseDTO;
import com.java.pip.dto.UserWithProductResponse;

import lombok.RequiredArgsConstructor;

@Service
@RequiredArgsConstructor
public class UserAggregationService {
	
	private final UserService userService;
    private final ProductClient productClient;
    
    public UserWithProductResponse getUserWithProduct(Long userId, Long productId) {
    	
    	UserResponseDTO user = userService.getUserById(userId);
    	ProductDTO product = productClient.getProduct(productId);
    	return new UserWithProductResponse(
                user.id(),
                user.name(),
                user.email(),
                product
        );
    }
}